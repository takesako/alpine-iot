--- cycfx2prog-0.47/Makefile
+++ cycfx2prog-0.47-new/Makefile
@@ -9,7 +9,7 @@
 
 # NOTE: Also add sources to the "dist:" target!
 cycfx2prog: cycfx2prog.o cycfx2dev.o
-	$(CC) $(LDFLAGS) cycfx2prog.o cycfx2dev.o -o cycfx2prog
+	$(CC) cycfx2prog.o cycfx2dev.o -o cycfx2prog $(LDFLAGS)
 
 clean:
 	-rm -f *.o
--- cycfx2prog-0.47/cycfx2dev.cc
+++ cycfx2prog-0.47-new/cycfx2dev.cc
@@ -328,7 +328,7 @@
 		size_t bs=dend-d;
 		if(bs>chunk_size)  bs=chunk_size;
 		size_t dl_addr=addr+(d-data);
-		int rv=usb_control_msg(usbhdl,0x40,0xa0,
+		int rv=usb_control_msg(usbhdl,0x40,AX,
 			/*addr=*/dl_addr,0,
 			/*buf=*/(char*)d,/*size=*/bs,
 			/*timeout=*/1000/*msec*/);
@@ -358,7 +358,7 @@
 		size_t bs=dend-d;
 		if(bs>chunk_size)  bs=chunk_size;
 		size_t rd_addr=addr+(d-data);
-		int rv=usb_control_msg(usbhdl,0xc0,0xa0,
+		int rv=usb_control_msg(usbhdl,0xc0,AX,
 			/*addr=*/rd_addr,0,
 			/*buf=*/(char*)d,/*size=*/bs,
 			/*timeout=*/1000/*msec*/);
@@ -488,7 +488,7 @@
 int CypressFX2Device::ProgramBinFile(const char *path,size_t start_addr)
 {
 	if(!IsOpen())
-	{  fprintf(stderr,"ProgramIHexFile: Not connected!\n");  return(1);  }
+	{  fprintf(stderr,"ProgramBinFile: Not connected!\n");  return(1);  }
 	
 	int fd=::open(path,O_RDONLY);
 	if(fd<0)
@@ -496,7 +496,7 @@
 		return(2);  }
 	
 	int n_errors=0;
-	const size_t buflen=1024;
+	const size_t buflen=64;
 	char buf[buflen];
 	size_t addr=start_addr;
 	for(;;)
--- cycfx2prog-0.47/cycfx2dev.h
+++ cycfx2prog-0.47-new/cycfx2dev.h
@@ -98,6 +98,9 @@
 		int CtrlMsg(unsigned char requesttype,
 			unsigned char request,int value,int index,
 			const unsigned char *ctl_buf=NULL,size_t ctl_buf_size=0);
+
+		// set AX to 0xa2 (small EEPROM) or 0xa9 (large EEPROM)
+		int AX = 0xa0; // default is 0xa0 (internal RAM)
 };
 
 #endif  /* _CYCFX2PROG_CYCFX2DEVICE_ */
